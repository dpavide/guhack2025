# GUHack2025 - Project Structure

## Quick Start

### Backend
```bash
cd backend
python -m uvicorn main:app --reload --port 8001
```

### Frontend  
```bash
cd frontend
npm run dev
```

### Initialize Rewards (first time only)
```bash
cd backend
python check_and_init_rewards.py
```

## Project Structure

```
guhack2025/
├── backend/
│   ├── .env                    # Supabase config (DO NOT COMMIT)
│   ├── .env.example            # Example config
│   ├── db.py                   # Database operations
│   ├── main.py                 # FastAPI app
│   ├── reward.py               # Rewards API routes
│   ├── check_and_init_rewards.py  # Init rewards data
│   └── requirements.txt        # Python dependencies
│
└── frontend/
    ├── app/
    │   ├── bills/              # Bills page
    │   ├── dashboard/          # Dashboard
    │   ├── login/              # Login page
    │   ├── signup/             # Signup page
    │   ├── rewards/            # ⭐ Rewards catalog (main)
    │   ├── redeem/             # Redirect to /rewards
    │   └── page.tsx            # Home page
    ├── components/             # UI components
    ├── lib/
    │   ├── rewardApi.ts        # Backend API client
    │   └── supabaseClient.ts   # Supabase config
    ├── public/                 # Static assets (images)
    └── package.json            # Node dependencies
```

## Core Files

### Backend
- **db.py**: All database operations, fully adapted to actual Supabase schema
- **main.py**: FastAPI entry point
- **reward.py**: API routes for rewards system

### Frontend
- **app/rewards/page.tsx**: Main rewards catalog UI
- **lib/rewardApi.ts**: Type-safe API client
- **components/**: Reusable UI components

## Database Tables (Supabase)

- **profiles**: User data (linked to auth.users)
- **bills**: Bill records
- **payments**: Payment records
- **rewards**: User credit balances (total_credits field)
- **credit_shop**: Available rewards
- **redemptions**: Redemption history
- **credit_log**: Credit transaction log
- **leaderboard**: User rankings

## Environment Variables

### Backend (.env)
```
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_KEY=xxx
```

### Frontend (.env.local)
```
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
NEXT_PUBLIC_API_URL=http://localhost:8001
```

## API Endpoints

- GET  `/api/reward/rewards` - List all rewards
- GET  `/api/reward/rewards/{id}` - Get reward details
- POST `/api/reward/redemptions` - Redeem a reward
- GET  `/api/reward/users/{id}` - Get user profile with credits
- POST `/api/reward/payments` - Create payment (earns credits)

Full API docs: http://localhost:8001/docs

---

**Status**: ✅ Production Ready
**Last Updated**: 2025-11-08
